"use strict";var T=Object.defineProperty;var I=Object.getOwnPropertyDescriptor;var R=Object.getOwnPropertyNames;var U=Object.prototype.hasOwnProperty;var M=(a,s)=>{for(var e in s)T(a,e,{get:s[e],enumerable:!0})},L=(a,s,e,r)=>{if(s&&typeof s=="object"||typeof s=="function")for(let o of R(s))!U.call(a,o)&&o!==e&&T(a,o,{get:()=>s[o],enumerable:!(r=I(s,o))||r.enumerable});return a};var q=a=>L(T({},"__esModule",{value:!0}),a);var $={};M($,{LogType:()=>k,Onvo:()=>E,Table:()=>A,default:()=>C});module.exports=q($);var t=class{#s;endpoint;async fetchBase(s,e,r,o){try{let n={"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET,PUT,POST,DELETE,PATCH,OPTIONS"};this.#s&&this.#s.trim()!==""&&(n["x-api-key"]=this.#s),o||(n["Content-Type"]="application/json");let v=await fetch(this.endpoint+s,{method:e||"GET",headers:n,body:o?r:r?JSON.stringify(r):void 0});if(!v.ok){let W=await v.text();throw new Error(W)}return await v.json()}catch(n){throw new Error("Error in making the request: "+n.message)}}async fetchBlob(s){try{let e={"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET,PUT,POST,DELETE,PATCH,OPTIONS"};return this.#s&&this.#s.trim()!==""&&(e["x-api-key"]=this.#s),await fetch(this.endpoint+s,{method:"GET",headers:e}).then(o=>o.blob())}catch(e){throw new Error("Error in making the request: "+e.message)}}constructor(s,e){if(s==null)throw new Error("API key is required");this.#s=s,this.endpoint=e?.endpoint||"https://dashboard.onvo.ai"}};var d=class extends t{list(){return this.fetchBase("/api/accounts")}get(s){return this.fetchBase("/api/accounts/"+s)}};var m=class extends t{list(){return this.fetchBase("/api/teams")}get(s){return this.fetchBase("/api/teams/"+s)}update(s,e){return this.fetchBase("/api/teams/"+s,"PUT",e)}};var u=class extends t{list(){return this.fetchBase("/api/embed-users")}get(s){return this.fetchBase("/api/embed-users/"+s)}delete(s){return this.fetchBase("/api/embed-users/"+s,"DELETE")}upsert(s,e){return this.fetchBase("/api/embed-users","POST",{id:s,name:e.name,email:e.email,metadata:e.metadata})}};var c=class extends t{list(s){return s&&s.dashboard?this.fetchBase("/api/datasources?dashboard="+s.dashboard):this.fetchBase("/api/datasources")}get(s){return this.fetchBase("/api/datasources/"+s)}delete(s){return this.fetchBase("/api/datasources/"+s,"DELETE")}update(s,e){return this.fetchBase("/api/datasources/"+s,"PUT",e)}create(s){return this.fetchBase("/api/datasources","POST",s)}};var h=class extends t{list(s){return s?this.fetchBase("/api/automations?dashboard="+s.dashboard):this.fetchBase("/api/automations")}get(s){return this.fetchBase("/api/automations/"+s)}delete(s){return this.fetchBase("/api/automations/"+s,"DELETE")}update(s,e){return this.fetchBase("/api/automations/"+s,"PUT",e)}create(s){return this.fetchBase("/api/automations","POST",s)}};var p=class extends t{list(){return this.fetchBase("/api/dashboards")}get(s){return this.fetchBase("/api/dashboards/"+s)}delete(s){return this.fetchBase("/api/dashboards/"+s,"DELETE")}update(s,e){return this.fetchBase("/api/dashboards/"+s,"PUT",e)}create(s){return this.fetchBase("/api/dashboards","POST",s)}};var g=class extends t{#s;constructor(s,e,r){super(e,r),this.#s=s}unlink(s){return this.fetchBase("/api/dashboards/"+this.#s+"/datasources/"+s,"DELETE")}link(s){return this.fetchBase("/api/dashboards/"+this.#s+"/datasources","POST",{datasourceId:s})}linkMultiple(s){return this.fetchBase("/api/dashboards/"+this.#s+"/datasources","POST",{datasourceIds:s})}};var b=class extends t{datasources;#s;constructor(s,e,r){super(e,r),this.#s=s,this.datasources=new g(s,e,r)}updateWidgetCache(){return this.fetchBase("/api/dashboards/"+this.#s+"/update-cache","POST")}export(s,e="light"){return this.fetchBlob(`/api/dashboards/${this.#s}/export?theme=${e}&format=${s}`)}summarize(s){return this.fetchBase(`/api/dashboards/${this.#s}/summarize`,"POST",{prompt:s})}};var l=class extends t{#s;constructor(s,e,r){super(e,r),this.#s=s}getAccessToken(){return this.fetchBase("/api/embed-users/"+this.#s+"/token")}};var P=class extends t{#s;constructor(s,e,r){super(e,r),this.#s=s}initialize(){return this.fetchBase("/api/datasources/"+this.#s+"/initialize")}uploadFile(s){let e=new FormData;return e.set("file",s),this.fetchBase("/api/datasources/"+this.#s+"/upload-file","POST",e,!0)}};var f=class extends t{list(s){return this.fetchBase("/api/questions?dashboard="+s.dashboard)}create(s){return this.fetchBase("/api/questions","POST",{dashboard:s.dashboardId,id:s.questionId||void 0,messages:s.messages})}delete(s){return this.fetchBase("/api/questions/"+s,"DELETE")}update(s,e){return this.fetchBase("/api/questions/"+s,"PUT",e)}};var _=class extends t{#s;constructor(s,e,r){super(e,r),this.#s=s}getRuns(){return this.fetchBase("/api/automations/"+this.#s+"/runs")}};var D=class extends t{#s;constructor(s,e,r){super(e,r),this.#s=s}export(s,e="light"){return this.fetchBlob(`/api/widgets/${this.#s}/export?theme=${e}&format=${s}`)}updatePrompts(s){return this.fetchBase("/api/widgets/"+this.#s,"PATCH",{messages:s})}executeCode(s){return this.fetchBase("/api/widgets/"+this.#s+"/execute-code","POST",{code:s})}};var x=class extends t{list(s){return s.embed_user?this.fetchBase("/api/sessions?embed_user="+s.embed_user):this.fetchBase("/api/sessions?parent_dashboard="+s.parent_dashboard)}get(s){return this.fetchBase("/api/sessions?dashboard="+s.dashboard)}revoke(s){return this.fetchBase("/api/sessions?dashboard="+s.dashboard,"DELETE")}revokeAll(s){return this.fetchBase("/api/sessions?parent_dashboard="+s.parent_dashboard,"DELETE")}async upsert({embed_user:s,parent_dashboard:e,parameters:r}){return await this.fetchBase("/api/sessions","POST",{user:s,parameters:r,dashboard:e})}};var w=class extends t{list(s){return this.fetchBase(`/api/widgets?dashboard=${s.dashboard}&use_in_library=${s.use_in_library}`)}get(s){return this.fetchBase("/api/widgets/"+s)}delete(s){return this.fetchBase("/api/widgets/"+s,"DELETE")}update(s,e){return this.fetchBase("/api/widgets/"+s,"PUT",e)}create(s){return this.fetchBase("/api/widgets","POST",s)}};var B=class extends t{#s;constructor(s,e,r){super(e,r),this.#s=s}export(s,e,r="light"){return this.fetchBlob(`/api/questions/${this.#s}/export?theme=${r}&format=${e}&messageIndex=${s}`)}};var S=class extends t{async uploadFile(s){let e=new FormData;return e.set("file",s),this.fetchBase("/api/utils/upload-file","POST",e,!0)}};var y=class extends t{#s;constructor(s,e,r){super(e,r),this.#s=s}getSubscription(){return this.fetchBase("/api/teams/"+this.#s+"/subscription")}};var O=class extends t{list(){return this.fetchBase("/api/logs")}create(s){return this.fetchBase("/api/logs","POST",s)}};var A=(i=>(i.Countries="countries",i.Invites="invites",i.ItineraryInvites="itinerary_invites",i.Itineraries="itineraries",i.Members="members",i.Teams="teams",i.Travelers="travelers",i.Accounts="accounts",i.DataSources="datasources",i.EmbedUsers="embed_users",i.APIKeys="api_keys",i.Widgets="widgets",i.Dashboards="dashboards",i.DashboardDatasources="dashboard_datasources",i.Sessions="sessions",i.Questions="questions",i.Integrations="integrations",i.DecryptedIntegrations="decrypted_integrations",i.DecryptedSessions="decrypted_sessions",i.DecryptedWidgets="decrypted_widgets",i.DecryptedDatasources="decrypted_datasources",i.Subscriptions="subscriptions",i.SubscriptionPlans="subscription_plans",i.Automations="automations",i.AutomationRuns="automation_runs",i.Logs="logs",i))(A||{});var k=(n=>(n.ViewDashboard="view-dashboard",n.EditDashboard="edit-dashboard",n.CreateWidget="create-widget",n.DeleteWidget="delete-widget",n.EditWidget="edit-widget",n))(k||{});var E=class extends t{accounts;teams;embed_users;datasources;automations;dashboards;questions;widgets;sessions;utils;logs;automation;dashboard;embed_user;datasource;widget;question;team;constructor(s,e){super(s,e),this.accounts=new d(s,e),this.teams=new m(s,e),this.embed_users=new u(s,e),this.datasources=new c(s,e),this.automations=new h(s,e),this.dashboards=new p(s,e),this.questions=new f(s,e),this.sessions=new x(s,e),this.widgets=new w(s,e),this.utils=new S(s,e),this.logs=new O(s,e),this.dashboard=r=>new b(r,s,e),this.embed_user=r=>new l(r,s,e),this.datasource=r=>new P(r,s,e),this.automation=r=>new _(r,s,e),this.widget=r=>new D(r,s,e),this.question=r=>new B(r,s,e),this.team=r=>new y(r,s,e)}},C=E;0&&(module.exports={LogType,Onvo,Table});
//# sourceMappingURL=index.js.map